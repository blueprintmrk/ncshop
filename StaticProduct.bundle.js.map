{"version":3,"sources":["webpack:///./source/scripts/sections/StaticProduct.js"],"names":["StaticProduct","section","postMessage","context","data","settings","product","richText","reviewForm","flickity","flickityOptions","$el","$","el","$product","find","isThreeColumn","layout","isThemeEditor","window","Shopify","designMode","useHistory","history","replaceState","$gallery","$details","$description","$formRegular","$formAlt","$formArea","layoutHandler","onBreakpointChange","bind","$productReviews","_moveForm","length","RichText","Forms","$script","options","productDetails","ProductDetails","offBreakpointChange","unload","isBreakpoint","contains","$form","detach","append"],"mappings":"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","file":"StaticProduct.bundle.js","sourcesContent":["import $ from 'jquery';\nimport $script from 'scriptjs';\nimport layout from '../Layout';\nimport Forms from '../Forms';\n\nimport RichText from '../components/RichText';\nimport ProductDetails from '../components/ProductDetails';\n\nexport default class StaticProduct {\n  constructor(section) {\n    this.section = section;\n    this.postMessage = section.postMessage;\n    this.context = section.data.context;\n    this.settings = section.data.settings;\n    this.product = section.data.product;\n    this.richText = null;\n    this.reviewForm = null;\n    this.flickity = null;\n    this.flickityOptions = null;\n\n    this.$el = $(section.el);\n    this.$product = this.$el.find('[data-product-wrapper]');\n\n    if (this.settings) {\n      this.isThreeColumn = this.settings.layout === 'layout--three-col';\n    }\n\n    // History\n    this.isThemeEditor = window.Shopify && window.Shopify.designMode;\n    this.useHistory = !this.isThemeEditor && history.replaceState;\n\n    this.$gallery = this.$product.find('[data-product-gallery]');\n\n    // Product details\n    this.$details = this.$product.find('[data-product-details]');\n\n    // Product description\n    this.$description = this.$product.find('[data-product-description]');\n\n    // Product form containers\n    this.$formRegular = this.$product.find('[data-product-form-regular]');\n    this.$formAlt = this.$product.find('[data-product-form-alt]');\n\n    // Product form area\n    this.$formArea = this.$product.find('[data-product-form-area]');\n\n    // Move product form and information on breakpoint change\n    this.layoutHandler = this.onBreakpointChange.bind(this);\n    layout.onBreakpointChange(this.layoutHandler);\n\n    // Product reviews\n    this.$productReviews = this.$el.find('[data-product-reviews]');\n\n    this._moveForm();\n\n    if (this.$description.length) {\n      this.richText = new RichText(this.$description);\n    }\n\n    if (this.$productReviews.length) {\n      this.reviewForm = new Forms(this.$productReviews, '.spr-form-input');\n    }\n\n    // Instantiate ProductDetails after Shopify API is loaded\n    $script($('[data-scripts]').data('shopify-api-url'), () => {\n      const options = {\n        $formArea: this.$formArea,\n        $gallery: this.$gallery,\n        $details: this.$details,\n        context: this.context,\n        settings: this.settings,\n        product: this.product,\n        useHistory: this.useHistory,\n      };\n\n      this.productDetails = new ProductDetails(options);\n    });\n  }\n\n  onSectionUnload() {\n    layout.offBreakpointChange(this.layoutHandler);\n    this.productDetails.unload();\n\n    if (this.richText) {\n      this.richText.unload();\n    }\n\n    if (this.reviewForm) {\n      this.reviewForm.unload();\n    }\n  }\n\n  onBreakpointChange() {\n    this._moveForm();\n  }\n\n  /**\n   * Move product form if is a three column layout\n   * @private\n   */\n  _moveForm() {\n    if (!this.isThreeColumn) return;\n\n    if (layout.isBreakpoint('L')) {\n      if (!$.contains(this.$formAlt[0], this.$formArea[0])) {\n        const $form = this.$formArea.detach();\n        this.$formAlt.append($form);\n      }\n    } else if (!$.contains(this.$formRegular[0], this.$formArea[0])) {\n      const $form = this.$formArea.detach();\n      this.$formRegular.append($form);\n    }\n  }\n}\n"],"sourceRoot":""}