{"version":3,"sources":["webpack:///./source/scripts/Layout.js","webpack:///./node_modules/just-debounce/index.js","webpack:///./source/scripts/sections/DynamicBlogPosts.js"],"names":["eventHandlers","previousBreakpoint","getBreakpoint","window","getComputedStyle","document","documentElement","getPropertyValue","replace","$","on","event","currentBreakpoint","forEach","eventHandler","previous","current","isBreakpoint","breakpoint","onBreakpointChange","indexOf","push","offBreakpointChange","index","splice","DynamicTwitterFeed","section","$el","el","$window","flickity","$blogPosts","find","_mobileSlider","bind","layout","_destroyFlickity","Flickity","cellSelector","contain","freeScroll","percentPosition","prevNextButtons","pageDots","setGallerySize","_bindSlider","off","destroy","_initFlickity","$slider","debounce","trigger","height","Math","ceil","maxCellHeight"],"mappings":"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","file":"DynamicBlogPosts.bundle.js","sourcesContent":["import $ from 'jquery';\n\nconst eventHandlers = [];\nlet previousBreakpoint = null;\n\nfunction getBreakpoint() {\n  return window\n    .getComputedStyle(document.documentElement, ':after')\n    .getPropertyValue('content')\n    .replace(/\"/g, '');\n}\n\n$(window).on('resize', event => {\n  const currentBreakpoint = getBreakpoint();\n\n  if (previousBreakpoint !== currentBreakpoint) {\n    eventHandlers.forEach(eventHandler => {\n      eventHandler(event, {\n        previous: previousBreakpoint,\n        current: currentBreakpoint,\n      });\n    });\n  }\n\n  previousBreakpoint = currentBreakpoint;\n});\n\nfunction isBreakpoint(breakpoint) {\n  return getBreakpoint() === breakpoint;\n}\n\nfunction onBreakpointChange(eventHandler) {\n  if (eventHandlers.indexOf(eventHandler) === -1) {\n    eventHandlers.push(eventHandler);\n  }\n}\n\nfunction offBreakpointChange(eventHandler) {\n  const index = eventHandlers.indexOf(eventHandler);\n\n  if (index !== -1) {\n    eventHandlers.splice(index, 1);\n  }\n}\n\nexport default {\n  isBreakpoint,\n  onBreakpointChange,\n  offBreakpointChange,\n};\n","module.exports = debounce\n\nfunction debounce (fn, delay, at_start, guarantee) {\n  var timeout\n  var args\n  var self\n\n  return function debounced () {\n    self = this\n    args = Array.prototype.slice.call(arguments)\n\n    if (timeout && (at_start || guarantee)) {\n      return\n    } else if (!at_start) {\n      clear()\n\n      timeout = setTimeout(run, delay)\n      return timeout\n    }\n\n    timeout = setTimeout(clear, delay)\n    fn.apply(self, args)\n\n    function run () {\n      clear()\n      fn.apply(self, args)\n    }\n\n    function clear () {\n      clearTimeout(timeout)\n      timeout = null\n    }\n  }\n}\n","import $ from 'jquery';\nimport debounce from 'just-debounce';\nimport Flickity from 'flickity';\n\nimport layout from '../Layout';\n\nexport default class DynamicTwitterFeed {\n  constructor(section) {\n    this.$el = $(section.el);\n    this.$window = $(window);\n    this.flickity = null;\n\n    this.$blogPosts = this.$el.find('[data-blog-posts]');\n\n    // Activate flickity on mobile\n    this._mobileSlider = this._mobileSlider.bind(this);\n    layout.onBreakpointChange(this._mobileSlider);\n    this._mobileSlider();\n  }\n\n  /**\n   * Unbind events when section is re-drawn\n   */\n  onSectionUnload() {\n    layout.offBreakpointChange(this._mobileSlider);\n    this._destroyFlickity();\n  }\n\n  _initFlickity() {\n    this.flickity = new Flickity(this.$blogPosts[0], {\n      cellSelector: '.article--excerpt-wrapper',\n      contain: true,\n      freeScroll: true,\n      percentPosition: false,\n      prevNextButtons: false,\n      pageDots: false,\n      setGallerySize: false,\n    });\n\n    this._bindSlider();\n  }\n\n  _destroyFlickity() {\n    if (!this.flickity) {\n      return;\n    }\n\n    this.$window.off('.blog-posts');\n    this.$blogPosts.off('.blog-posts');\n    this.flickity.destroy();\n    this.flickity = null;\n  }\n\n  _mobileSlider() {\n    // If is Large layout, attempt to destroy flickity\n    if (layout.isBreakpoint('L')) {\n      this._destroyFlickity();\n      return;\n    }\n\n    // Is XS/S/M, and flickity is init'd -- do nothing\n    if (this.flickity) {\n      return;\n    }\n\n    // Is XS/S/M, and flickity is not init'd\n    this._initFlickity();\n  }\n\n  _bindSlider() {\n    const $slider = this.$blogPosts.find('.flickity-slider');\n\n    this.$window.on('resize.blog-posts', debounce(() => {\n      this.$blogPosts.trigger('heightUpdate.blog-posts');\n    }));\n\n    this.flickity.on('cellSelect', () => {\n      this.$blogPosts.trigger('heightUpdate.blog-posts');\n    });\n\n    this.$blogPosts.on('heightUpdate.blog-posts', () => {\n      if (!this.flickity) {\n        return;\n      }\n\n      $slider.height(Math.ceil(this.flickity.maxCellHeight));\n    });\n\n    // Sets the Slider to the height of the first slide\n    this.$blogPosts.trigger('heightUpdate.blog-posts');\n  }\n}\n"],"sourceRoot":""}